
CREATE or replace ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_transport` AS select it_service.priceugx serviceprice,`it_fuel`.`priceugx` AS `fuelprice`,`a`.`id` AS `id`,`a`.`regno` AS `regno`,`a`.`vehicletype` AS `vehicletype`,`a`.`fueltype` AS `fueltype`,`a`.`tyres` AS `tyres`,tb.tyres num_tyres, `a`.`description` AS `description`,`a`.`dept` AS `dept`,`a`.`section` AS `section`,`a`.`subsection` AS `subsection`,`a`.`battery` AS `battery`,tb.battery num_battery,`b`.`vehicletype` AS `type`,`a`.`fuelconsumption` AS `fuelconsumption`,`b`.`serviceinterval` AS `serviceinterval` from (((`transport_budget` `tb` join `vehicles` `a` on((`tb`.`vehicle` = `a`.`id`))) join `vehicletypes` `b` on((`b`.`id` = `a`.`vehicletype`))) join `items_prices_view` `it_fuel` on(((convert(`it_fuel`.`name` using utf8mb4) = convert(`a`.`fueltype` using utf8mb4)) and ((`it_fuel`.`accountcode` = 123) or (`it_fuel`.`accountcode` = 124)) and (`it_fuel`.`budget` = `tb`.`budget`)))) join items_prices_view it_service on (it_service.name=b.vehicletype and it_service.accountcode=121 and it_service.budget=tb.budget)

